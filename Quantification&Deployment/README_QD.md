<div align="center">
  
![Image](../img/logo.png)

</div><div align="left">
  
<h1>Quantification&Deployment
  
</h1>
</div>

æœ¬é¡¹ç›®åŸºäº [**LMDeploy**](https://github.com/InternLM/Imdeploy) å®Œæˆæ¨¡å‹çš„é‡åŒ–å’Œéƒ¨ç½²å·¥ä½œï¼Œå…³äºå·¥å…·è¿™é‡Œä¸åšå…·ä½“ä»‹ç»ï¼Œå¯ä»¥å‚è€ƒ [05 LMDeployå¤§æ¨¡å‹é‡åŒ–éƒ¨ç½²å®è·µ](https://blog.csdn.net/Wzxdecsdn/article/details/135623580) è¿›è¡Œäº†è§£ã€‚è¿™é‡Œå±•ç¤ºåŸºäº [<img src="../img/modelscope_logo.png" width="20px" /> Legal-Eagle-InternLM2-chat-7B-Merged](https://www.modelscope.cn/models/wangzixinxinxin/Legal-Eagle-InternLM2-chat-7B-Merged/files) çš„é‡åŒ–éƒ¨ç½²æµç¨‹ã€‚

## âš—ï¸ 4-bit Quantification & TurboMind Inference

![consult_demo](../img/Quantification&TurboMind_Inference.gif)

æ¨ç†é€Ÿåº¦éå¸¸å¿«ï¼Œæ˜¾å­˜å ç”¨ä¸º **7GB** ï¼Œä¸”æ¨ç†ç²¾åº¦å¹¶æ²¡æœ‰å¤§å¹…ä¸‹é™
 
## ğŸ”¬Experiments

æœ¬é¡¹ç›®æ¯”è¾ƒäº†HuggingFaceæ¨ç†ã€TurboMindæ¨ç†ã€4bit-TuborMindæ¨ç†åœ¨å¯åŠ¨æ—¶çš„æ˜¾å­˜å ç”¨å¦‚ä¸‹ï¼ˆä½¿ç”¨ä¸Šè¿°çš„å‚æ•°ï¼ŒKV Cacheé‡åŒ–æœ¬é¡¹ç›®ä¹Ÿåšè¿‡å®éªŒï¼Œä½†æ˜¯ç”±äºå›ºå®šcache_chunk_size = 1ä¸”è¿™é‡Œåªè€ƒè™‘å¯åŠ¨æ—¶çš„æ˜¾å­˜å ç”¨æ²¡æœ‰è€ƒè™‘æ¨ç†æ—¶çš„KV Cacheæ˜¾å­˜å ç”¨æƒ…å†µï¼Œæ•…ä¸å¯¹å…¶åšè®¨è®ºï¼‰ï¼š

| Model                                                                                                       | HuggingFace                                                                                               | TurboMind                                                                                                                                                                | 4bit-Turbomind
|:------------------------------------------------------------------------------------------------------------|:---------------------------------------------------------------------------------------------------------------|:------------------------------------------------------------------------------------------------------------|:-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
**InternLM2-chat-7B**                          | **15816** MB                                 |**16258** MB| **6500** MB    |       
**InternLM2-chat-20B**                         |          **35942** MB                    |**39566** MB| **13452** MB                             |
